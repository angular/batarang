<div bat-vertical-split ng-controller="PerfController" class="perf" ng-class="{disabled: !enabled}">

  <h1>Performance</h1>

  <h3 ng-hide="::lastDigestTime">Waiting for first digest cycle...</h3>

  <div class="stats">
    <div class="left">
      <div class="graph">
        <canvas></canvas>
        <div>
          <span>{{ numWatchers }} watchers</span> in <span>{{ lastDigestTime | number }}ms</span>
        </div>
      </div>
    </div>

    <div class="right averages">
      <div>The last digest cycle took {{ lastDigestTime | number }} ms and had {{ numWatchers || 0 }} watchers</div>
      <div ng-show="::last30Digests.watchers">The last 30 digest cycles averaged {{ last30Digests.time | number }} ms and averaged {{ last30Digests.watchers | number }} watchers.</div>
    </div>
  </div>
  <hr>
  <h2>Digest timings</h2>
  <table class="watcher-table">
    <thead>
      <tr>
        <td>Watcher text</td>
        <td>Watcher total time</td>
        <td>Number of Watchers</td>
        <td>Average watcher time</td>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="watcher in watchTimings">
        <td><pre>{{ watcher.text }}</pre></td>
        <td><pre>{{ watcher.time | number }} ms</pre></td>
        <td><pre>{{ watcher.count }}</pre></td>
        <td><pre>{{ watcher.time / watcher.count | number }} ms</pre></td>
      </tr>
    </tbody>
  </table>
  <hr>
  <h2>Raw data</h2>
  <pre>{{ perf | json }}</pre>
</div>
